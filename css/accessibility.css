/* Ensure demo/info banners stack using JS, not default CSS */
/* Banners use normal flow, full width via container */
.demo-banner, .info-banner {
    position: static;
    right: unset;
    left: unset;
    z-index: 1;
    max-width: none;
    width: 100%;
    transition: none;
}
/* ============================================
   ACCESSIBILITY FEATURES
   ============================================ */

/* High Contrast Mode */
.high-contrast {
    --primary: #00ff00;
    --primary-dark: #00cc00;
    --text-primary: #ffffff;
    --text-secondary: #cccccc;
    --bg-primary: #000000;
    --bg-secondary: #111111;
    --bg-card: #222222;
    --border-color: #ffffff;
}

.high-contrast .btn-primary {
    background: #00ff00;
    color: #000000;
    font-weight: bold;
}

.high-contrast a {
    color: #00ffff;
    text-decoration: underline;
}

/* Reduced Motion */
.reduced-motion * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
}

/* Dyslexia-Friendly Font */
.dyslexia-friendly {
    font-family: 'OpenDyslexic', 'Comic Sans MS', sans-serif;
    letter-spacing: 0.05em;
    line-height: 1.8;
}

.dyslexia-friendly h1,
.dyslexia-friendly h2,
.dyslexia-friendly h3 {
    font-weight: 700;
    letter-spacing: 0.1em;
}

/* Large Text Mode */
.large-text {
    font-size: 125%;
}

.large-text h1 { font-size: 3.5rem; }
.large-text h2 { font-size: 3rem; }
.large-text h3 { font-size: 2.5rem; }
.large-text .btn { font-size: 1.2rem; }
.large-text input,
.large-text select { font-size: 1.2rem; padding: 1rem; }

/* Extra Large Text Mode */
.extra-large-text {
    font-size: 150%;
}

.extra-large-text h1 { font-size: 4rem; }
.extra-large-text h2 { font-size: 3.5rem; }
.extra-large-text h3 { font-size: 3rem; }
.extra-large-text .btn { font-size: 1.4rem; padding: 1.25rem 2rem; }
.extra-large-text input,
.extra-large-text select { font-size: 1.4rem; padding: 1.25rem; }

/* Screen Reader Only Content */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Focus Styles for Keyboard Navigation */
:focus-visible {
    outline: 3px solid var(--primary);
    outline-offset: 2px;
}

.btn:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible {
    outline: 3px solid var(--primary);
    outline-offset: 2px;
}

/* Skip to Content Link */
.skip-to-content {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--primary);
    color: white;
    padding: 0.75rem 1.5rem;
    text-decoration: none;
    border-radius: 0 0 var(--radius-md) 0;
    z-index: 9999;
}

.skip-to-content:focus {
    top: 40px; /* Below accessibility bar */
}

/* Color Blind Modes */
/* NOTE: Filters are applied to .color-filter-wrapper instead of body/main content 
   to prevent stacking context issues that break position: fixed on accessibility bar */

/* Protanopia (Red-Blind) */
/* Deuteranopia (Green-Blind) */
/* Tritanopia (Blue-Blind) */
/* Grayscale */
/* Invert Colors */

/* Apply color filters using CSS custom property approach that doesn't affect fixed positioning */
body.protanopia {
    --color-filter: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"><filter id="protanopia"><feColorMatrix type="matrix" values="0.567,0.433,0,0,0 0.558,0.442,0,0,0 0,0.242,0.758,0,0 0,0,0,1,0"/></filter></svg>#protanopia');
}

body.deuteranopia {
    --color-filter: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"><filter id="deuteranopia"><feColorMatrix type="matrix" values="0.625,0.375,0,0,0 0.7,0.3,0,0,0 0,0.3,0.7,0,0 0,0,0,1,0"/></filter></svg>#deuteranopia');
}

body.tritanopia {
    --color-filter: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"><filter id="tritanopia"><feColorMatrix type="matrix" values="0.95,0.05,0,0,0 0,0.433,0.567,0,0 0,0.475,0.525,0,0 0,0,0,1,0"/></filter></svg>#tritanopia');
}

body.grayscale {
    --color-filter: grayscale(100%);
}

body.invert-colors {
    --color-filter: invert(100%);
}

/* Apply filter to main page container and all major content areas */
/* This ensures the entire page content has the color filter applied */
body.protanopia #main-content,
body.deuteranopia #main-content,
body.tritanopia #main-content,
body.grayscale #main-content,
body.invert-colors #main-content,
body.protanopia main,
body.deuteranopia main,
body.tritanopia main,
body.grayscale main,
body.invert-colors main,
body.protanopia .page,
body.deuteranopia .page,
body.tritanopia .page,
body.grayscale .page,
body.invert-colors .page,
body.protanopia .container,
body.deuteranopia .container,
body.tritanopia .container,
body.grayscale .container,
body.invert-colors .container {
    filter: var(--color-filter);
}

/* Global header should also get filter to maintain consistency */
body.protanopia .global-header,
body.deuteranopia .global-header,
body.tritanopia .global-header,
body.grayscale .global-header,
body.invert-colors .global-header {
    filter: var(--color-filter);
}

/* Hero section filter */
body.protanopia .hero,
body.deuteranopia .hero,
body.tritanopia .hero,
body.grayscale .hero,
body.invert-colors .hero {
    filter: var(--color-filter);
}

/* Spotlight and cards */
body.protanopia .spotlight-grid,
body.deuteranopia .spotlight-grid,
body.tritanopia .spotlight-grid,
body.grayscale .spotlight-grid,
body.invert-colors .spotlight-grid,
body.protanopia .opportunity-grid,
body.deuteranopia .opportunity-grid,
body.tritanopia .opportunity-grid,
body.grayscale .opportunity-grid,
body.invert-colors .opportunity-grid {
    filter: var(--color-filter);
}

/* Darken Interface */
.dark-interface {
    --bg-primary: #000000;
    --bg-secondary: #111111;
    --bg-card: #222222;
    --text-primary: #ffffff;
    --text-secondary: #cccccc;
}

/* Increased Spacing for Motor Impairments */
.motor-impairment .btn {
    padding: 1rem 2rem;
    margin: 0.5rem;
    min-height: 50px;
}

.motor-impairment input,
.motor-impairment select {
    padding: 1rem;
    margin-bottom: 1rem;
}

/* Hide Animations for Photosensitive Epilepsy */
.no-animations * {
    animation: none !important;
    transition: none !important;
}

.no-animations .match-badge,
.no-animations .opportunity-card:hover,
.no-animations .spotlight-card:hover {
    transform: none !important;
}

/* Cursor Size Increase */
.large-cursor {
    cursor: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="14" fill="white" stroke="black" stroke-width="2"/></svg>') 16 16, auto;
}

.large-cursor button,
.large-cursor a,
.large-cursor input,
.large-cursor select {
    cursor: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="14" fill="white" stroke="black" stroke-width="2"/></svg>') 16 16, auto;
}

/* Reading Guide */
.reading-guide {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9998;
}

.reading-guide-line {
    position: absolute;
    width: 100%;
    height: 2px;
    background: rgba(255, 0, 0, 0.5);
    top: 50%;
    transform: translateY(-50%);
}

.reading-guide.active {
    display: block;
}

/* Text to Speech Controls */
.tts-controls {
    position: fixed;
    bottom: 1rem;
    left: 1rem;
    background: var(--bg-card);
    padding: 1rem;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
    z-index: 9997;
    display: none;
}

.tts-controls.active {
    display: block;
}

.tts-btn {
    background: var(--primary);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-sm);
    cursor: pointer;
    margin: 0 0.25rem;
}

.tts-btn:hover {
    background: var(--primary-dark);
}

/* Always keep accessibility bar fixed at top, regardless of color mode or wrapper */
.accessibility-bar {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    z-index: 10003 !important;
    background-color: var(--bg-card) !important;
}

.protanopia .accessibility-bar,
.deuteranopia .accessibility-bar,
.tritanopia .accessibility-bar,
.grayscale .accessibility-bar,
body.protanopia .accessibility-bar,
body.deuteranopia .accessibility-bar,
body.tritanopia .accessibility-bar,
body.grayscale .accessibility-bar {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    z-index: 10003 !important;
}

/* ============================================
   DYNAMIC MODAL COLORS FOR ACCESSIBILITY THEMES
   ============================================ */

/* Base modal styling with CSS variables for dynamic color updates */
.modal {
    --modal-bg: var(--bg-card);
    --modal-text: var(--text-primary);
    --modal-border: var(--border-color);
    --modal-shadow: rgba(0, 0, 0, 0.5);
}

.modal-content {
    background: var(--modal-bg) !important;
    color: var(--modal-text) !important;
    border-color: var(--modal-border) !important;
    box-shadow: 0 20px 60px var(--modal-shadow) !important;
}

/* High Contrast Mode - Modal Updates */
.high-contrast .modal,
.high-contrast .modal-content {
    --modal-bg: var(--bg-card);
    --modal-text: var(--text-primary);
    --modal-border: var(--border-color);
}

.high-contrast .modal-content {
    background: var(--bg-card) !important;
    border: 2px solid var(--border-color) !important;
}

/* Color Blind Modes - Modal Updates */
body.protanopia .modal,
body.protanopia .modal-content,
body.deuteranopia .modal,
body.deuteranopia .modal-content,
body.tritanopia .modal,
body.tritanopia .modal-content,
body.grayscale .modal,
body.grayscale .modal-content,
body.invert-colors .modal,
body.invert-colors .modal-content {
    --modal-bg: var(--bg-card);
    --modal-text: var(--text-primary);
    --modal-border: var(--border-color);
}

/* Ensure modal content inherits accessibility filter */
body.protanopia .modal-content,
body.deuteranopia .modal-content,
body.tritanopia .modal-content,
body.grayscale .modal-content,
body.invert-colors .modal-content {
    filter: var(--color-filter);
}

/* Modal cards inside accessibility modes */
body.protanopia .spotlight-card,
body.deuteranopia .spotlight-card,
body.tritanopia .spotlight-card,
body.grayscale .spotlight-card,
body.invert-colors .spotlight-card {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;
}

/* Large text mode adjustments for modals */
.large-text .modal-content,
.extra-large-text .modal-content {
    font-size: 1.1rem;
}

.large-text .modal-content h3,
.large-text .modal-content h4,
.extra-large-text .modal-content h3,
.extra-large-text .modal-content h4 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
}

/* Print Styles */
@media print {
    .accessibility-bar,
    .global-header,
    .ai-panel,
    .btn,
    .save-btn,
    .modal {
        display: none !important;
    }
    
    body {
        background: white !important;
        color: black !important;
        font-size: 12pt;
    }
    
    .opportunity-card,
    .profile-card {
        break-inside: avoid;
        border: 1px solid #ccc;
        box-shadow: none;
    }
    
    a {
        color: black;
        text-decoration: underline;
    }
    
    a::after {
        content: " (" attr(href) ")";
        font-size: 0.9em;
        color: #666;
    }
}