<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile | Student Atlas</title>
    
    <!-- Pre-initialization: Apply saved accessibility settings before page renders -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('studentAtlasTheme');
            if (savedTheme) document.documentElement.setAttribute('data-theme', savedTheme);
            const savedAccessibility = localStorage.getItem('studentAtlasAccessibility');
            if (savedAccessibility) {
                try {
                    const accessibility = JSON.parse(savedAccessibility);
                    const html = document.documentElement;
                    if (accessibility.fontSize === 'large') html.classList.add('large-text');
                    else if (accessibility.fontSize === 'extra-large') html.classList.add('extra-large-text');
                    if (accessibility.highContrast) html.classList.add('high-contrast');
                    if (accessibility.colorBlindMode && accessibility.colorBlindMode !== 'normal') html.classList.add(accessibility.colorBlindMode);
                    if (accessibility.dyslexiaFriendly) html.classList.add('dyslexia-friendly');
                    if (accessibility.reducedMotion) html.classList.add('reduced-motion');
                } catch (e) {}
            }
        })();
    </script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/accessibility.css">
    
    <meta name="description" content="Student Atlas Profile - View your National Blueprint, bookmarked opportunities, and account credentials.">
</head>
<body>
    <!-- Skip to Content Link -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <!-- ========== ACCESSIBILITY CONTROLS ========== -->
    <div class="accessibility-bar" id="accessibilityBar">
        <button class="accessibility-btn" id="fontIncrease" aria-label="Increase font size">
            <i data-lucide="zoom-in"></i> A+
        </button>
        <button class="accessibility-btn" id="fontDecrease" aria-label="Decrease font size">
            <i data-lucide="zoom-out"></i> A-
        </button>
        <button class="accessibility-btn" id="highContrast" aria-label="Toggle high contrast mode">
            <i data-lucide="sun"></i> Contrast
        </button>
        <button class="accessibility-btn" id="themeToggle" aria-label="Toggle light/dark theme">
            <i data-lucide="moon"></i> Theme
        </button>
        <button class="accessibility-btn" id="screenReader" aria-label="Enable screen reader mode">
            <i data-lucide="headphones"></i> Reader
        </button>
        <select class="accessibility-btn" id="colorBlindMode" aria-label="Color blind modes">
            <option value="normal">Normal Vision</option>
            <option value="protanopia">Protanopia</option>
            <option value="deuteranopia">Deuteranopia</option>
            <option value="tritanopia">Tritanopia</option>
            <option value="grayscale">Grayscale</option>
        </select>
    </div>

    <!-- ========== GLOBAL HEADER ========== -->
    <header class="global-header">
        <div class="logo" onclick="window.location.href='index.html'">
            <i data-lucide="map" class="logo-icon"></i>
            <h1>Student Atlas</h1>
        </div>
        
        <div class="nav-right">
            <!-- App Navigation -->
            <div id="appNav">
                <button class="btn btn-secondary" onclick="window.location.href='dashboard.html'">
                    <i data-lucide="layout-grid"></i> Directory
                </button>
                <div class="profile-dropdown">
                    <button class="btn btn-secondary" onclick="toggleProfileMenu()">
                        <i data-lucide="user"></i>
                        <span id="userName">TSA Student 2026</span>
                        <i data-lucide="chevron-down"></i>
                    </button>
                    <div class="profile-menu hidden" id="profileMenu">
                        <a href="profile.html#profile" class="profile-menu-item active">
                            <i data-lucide="id-card"></i>
                            <span>My Profile</span>
                        </a>
                        <a href="profile.html#bookmarks" class="profile-menu-item">
                            <i data-lucide="bookmark"></i>
                            <span>My Bookmarks</span>
                        </a>
                        <a href="profile.html#credentials" class="profile-menu-item">
                            <i data-lucide="key"></i>
                            <span>Credentials</span>
                        </a>
                        <a href="submission.html" class="profile-menu-item">
                            <i data-lucide="plus-circle"></i>
                            <span>Add an Ally</span>
                        </a>
                        <div class="profile-menu-item" onclick="logout()">
                            <i data-lucide="log-out"></i>
                            <span>Logout</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ========== MAIN PROFILE CONTENT ========== -->
    <main id="main-content" class="page profile-page">
        <!-- Profile Header -->
        <div class="profile-header">
            <h2><i data-lucide="user"></i> My Student Profile</h2>
            <button class="btn btn-primary" onclick="window.location.href='dashboard.html'">
                <i data-lucide="arrow-left"></i> Back to Dashboard
            </button>
        </div>
        
        <!-- Profile Tabs -->
        <div class="profile-tabs">
            <button class="tab-btn active" onclick="showTab('profile', this)" id="profileTabBtn">
                <i data-lucide="id-card"></i> My Profile
            </button>
            <button class="tab-btn" onclick="showTab('bookmarks', this)" id="bookmarksTabBtn">
                <i data-lucide="bookmark"></i> Bookmarks
                <span class="bookmark-count" id="bookmarkCountBadge">0</span>
            </button>
            <button class="tab-btn" onclick="showTab('credentials', this)" id="credentialsTabBtn">
                <i data-lucide="key"></i> Credentials
            </button>
        </div>
        
        <!-- ========== PROFILE TAB ========== -->
        <div id="profile-tab" class="tab-content active">
            <div class="profile-card">
                <div class="flex items-center gap-3 mb-4">
                    <div class="avatar-placeholder">
                        <i data-lucide="user" style="width: 2rem; height: 2rem;"></i>
                    </div>
                    <div>
                        <h3>My National Blueprint</h3>
                        <p class="text-dim">Personalized pathway created by Zeus the Wizard</p>
                    </div>
                </div>
                
                <div class="profile-info">
                    <div class="info-item">
                        <span class="info-label">Full Name</span>
                        <span class="info-value" id="profileName">TSA Student 2026</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Student ID</span>
                        <span class="info-value" id="profileId">TSA2026-STU-001</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Grade Level</span>
                        <span class="info-value" id="profileGrade">11th Grade</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Current GPA</span>
                        <span class="info-value" id="profileGPA">3.8</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Service Hours</span>
                        <span class="info-value" id="profileHours">120 hours</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Primary Cluster</span>
                        <span class="info-value" id="profileCluster">STEM</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Career Interests</span>
                        <span class="info-value" id="profileCareer">Engineering, Medicine</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Skills & Talents</span>
                        <span class="info-value" id="profileSkills">Programming, Research, Leadership</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Leadership Roles</span>
                        <span class="info-value" id="profileLeadership">Club President, Team Captain</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Financial Need</span>
                        <span class="info-value" id="profileFinancial">No</span>
                    </div>
                </div>
                
                <div class="mt-6 pt-6 border-t border-border-color">
                    <h4><i data-lucide="sparkles"></i> Zeus's Analysis</h4>
                    <p class="text-dim mt-2" id="zeusAnalysis">
                        Based on your profile, you're strongly aligned with STEM opportunities. Your high GPA and research skills make you an excellent candidate for competitive programs like NASA OSTEM and MIT Research Institute. Consider focusing on research-focused opportunities that match your engineering interests.
                    </p>
                </div>
            </div>
            
            <!-- Match Statistics Card -->
            <div class="profile-card">
                <h3><i data-lucide="target"></i> Match Statistics</h3>
                <p class="text-dim">Your compatibility with available opportunities</p>
                
                <div class="profile-info mt-4">
                    <div class="info-item">
                        <span class="info-label">Total Opportunities</span>
                        <span class="info-value">102</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Eligible for You</span>
                        <span class="info-value" id="eligibleCount">72</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Strong Matches (90%+)</span>
                        <span class="info-value" id="strongMatches">24</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Good Matches (70-89%)</span>
                        <span class="info-value" id="goodMatches">48</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Average Match Score</span>
                        <span class="info-value" id="avgMatchScore">92%</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Cluster Distribution</span>
                        <span class="info-value">
                            <span class="cluster-tag stem">STEM</span>
                            <span class="cluster-tag arts">Arts</span>
                            <span class="cluster-tag humanitarian">Humanitarian</span>
                        </span>
                    </div>
                </div>
                
                <!-- Cluster Match Visualization -->
                <div class="mt-6">
                    <h4><i data-lucide="pie-chart"></i> Cluster Compatibility</h4>
                    <div class="cluster-bars mt-3">
                        <div class="cluster-bar">
                            <div class="cluster-label">
                                <span class="cluster-dot stem"></span>
                                <span>STEM</span>
                            </div>
                            <div class="bar-container">
                                <div class="bar-fill stem" style="width: 95%;"></div>
                                <span class="bar-percentage">95%</span>
                            </div>
                        </div>
                        <div class="cluster-bar">
                            <div class="cluster-label">
                                <span class="cluster-dot arts"></span>
                                <span>Arts</span>
                            </div>
                            <div class="bar-container">
                                <div class="bar-fill arts" style="width: 65%;"></div>
                                <span class="bar-percentage">65%</span>
                            </div>
                        </div>
                        <div class="cluster-bar">
                            <div class="cluster-label">
                                <span class="cluster-dot humanitarian"></span>
                                <span>Humanitarian</span>
                            </div>
                            <div class="bar-container">
                                <div class="bar-fill humanitarian" style="width: 78%;"></div>
                                <span class="bar-percentage">78%</span>
                            </div>
                        </div>
                        <div class="cluster-bar">
                            <div class="cluster-label">
                                <span class="cluster-dot civics"></span>
                                <span>Civics</span>
                            </div>
                            <div class="bar-container">
                                <div class="bar-fill civics" style="width: 72%;"></div>
                                <span class="bar-percentage">72%</span>
                            </div>
                        </div>
                        <div class="cluster-bar">
                            <div class="cluster-label">
                                <span class="cluster-dot scholarships"></span>
                                <span>Scholarships</span>
                            </div>
                            <div class="bar-container">
                                <div class="bar-fill scholarships" style="width: 88%;"></div>
                                <span class="bar-percentage">88%</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="flex gap-3 mt-6">
                    <button class="btn btn-primary" onclick="exportBlueprint()">
                        <i data-lucide="download"></i> Export Blueprint (PDF)
                    </button>
                    <button class="btn btn-secondary" onclick="editProfile()">
                        <i data-lucide="edit"></i> Edit Profile
                    </button>
                    <button class="btn btn-secondary" onclick="window.location.href='dashboard.html?cluster=' + document.getElementById('profileCluster').textContent">
                        <i data-lucide="compass"></i> Explore Matching Opportunities
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ========== BOOKMARKS TAB ========== -->
        <div id="bookmarks-tab" class="tab-content">
            <div class="profile-card">
                <div class="flex justify-between items-center mb-4">
                    <div>
                        <h3><i data-lucide="bookmark"></i> Saved Opportunities</h3>
                        <p class="text-dim">Your bookmarked opportunities for easy access</p>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="text-dim" id="bookmarkTotal">0 bookmarks</span>
                        <button class="btn btn-secondary btn-small" onclick="clearBookmarks()">
                            <i data-lucide="trash-2"></i> Clear All
                        </button>
                    </div>
                </div>
                
                <div class="bookmarks-list" id="bookmarksList">
                    <!-- Bookmarks will be loaded here -->
                    <div class="empty-state" id="emptyBookmarks">
                        <i data-lucide="bookmark" style="width: 3rem; height: 3rem; color: var(--text-dim);"></i>
                        <h4 class="mt-3">No Bookmarks Yet</h4>
                        <p class="text-dim">Start saving opportunities from the dashboard by clicking the bookmark icon!</p>
                        <button class="btn btn-primary mt-3" onclick="window.location.href='dashboard.html'">
                            <i data-lucide="layout-grid"></i> Browse Opportunities
                        </button>
                    </div>
                </div>
                
                <div class="mt-6 pt-6 border-t border-border-color">
                    <h4><i data-lucide="lightbulb"></i> Bookmark Tips</h4>
                    <ul class="tip-list">
                        <li>Bookmark opportunities you're interested in to save them for later review</li>
                        <li>Compare bookmarked opportunities side-by-side to make informed decisions</li>
                        <li>Use bookmarks to track application deadlines and requirements</li>
                        <li>Share your bookmarks with mentors or parents for advice</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- ========== CREDENTIALS TAB ========== -->
        <div id="credentials-tab" class="tab-content">
            <div class="profile-card">
                <h3><i data-lucide="key"></i> Account Credentials</h3>
                <p class="text-dim">Your login information and account details</p>
                
                <div class="credentials-section mt-4">
                    <h4><i data-lucide="user"></i> Personal Information</h4>
                    <table class="credentials-table">
                        <tr>
                            <th>Field</th>
                            <th>Value</th>
                            <th>Actions</th>
                        </tr>
                        <tr>
                            <td>Username</td>
                            <td id="credUsername">tsa_student_2026</td>
                            <td><button class="btn-text" onclick="copyToClipboard('credUsername')">Copy</button></td>
                        </tr>
                        <tr>
                            <td>Email Address</td>
                            <td id="credEmail">student@tsaatlas.org</td>
                            <td><button class="btn-text" onclick="copyToClipboard('credEmail')">Copy</button></td>
                        </tr>
                        <tr>
                            <td>Password</td>
                            <td id="credPassword">••••••••••</td>
                            <td>
                                <button class="btn-text" onclick="togglePassword()" id="togglePasswordBtn">Show</button>
                                <button class="btn-text" onclick="copyToClipboard('credPassword')">Copy</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Account Type</td>
                            <td>Student Account</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Member Since</td>
                            <td>January 2026</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Last Login</td>
                            <td id="lastLogin">Just now</td>
                            <td>-</td>
                        </tr>
                    </table>
                </div>
                
                <div class="credentials-section mt-6">
                    <h4><i data-lucide="shield"></i> Security Settings</h4>
                    <div class="security-settings">
                        <div class="security-item">
                            <div>
                                <h5>Two-Factor Authentication</h5>
                                <p class="text-dim">Add an extra layer of security to your account</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="twoFactorToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="security-item">
                            <div>
                                <h5>Login Notifications</h5>
                                <p class="text-dim">Get notified when someone logs into your account</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="loginNotifications" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="security-item">
                            <div>
                                <h5>Session Timeout</h5>
                                <p class="text-dim">Automatically log out after 30 minutes of inactivity</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="sessionTimeout" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="credentials-section mt-6">
                    <h4><i data-lucide="settings"></i> Account Actions</h4>
                    <div class="action-buttons">
                        <button class="btn btn-secondary" onclick="changePassword()">
                            <i data-lucide="lock"></i> Change Password
                        </button>
                        <button class="btn btn-secondary" onclick="updateEmail()">
                            <i data-lucide="mail"></i> Update Email
                        </button>
                        <button class="btn btn-secondary" onclick="downloadData()">
                            <i data-lucide="database"></i> Download My Data
                        </button>
                        <button class="btn btn-error" onclick="deleteAccount()">
                            <i data-lucide="trash-2"></i> Delete Account
                        </button>
                    </div>
                </div>
                
                <div class="mt-6 pt-6 border-t border-border-color text-center">
                    <p class="text-dim">
                        <i data-lucide="info"></i> For TSA Judges: These are demo credentials. In a production environment, passwords would be encrypted and security measures would be more robust.
                    </p>
                </div>
            </div>
        </div>
    </main>

    <!-- ========== FOOTER ========== -->
    <footer class="global-header" style="border-top: 1px solid var(--border-color); border-bottom: none; margin-top: 4rem;">
        <div class="container">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-dim">&copy; 2026 Student Atlas. All Rights Reserved.</p>
                    <p class="text-dim" style="font-size: 0.9rem;">
                        TSA Webmaster Chapter Entry
                    </p>
                </div>
                <div class="flex gap-3">
                    <a href="submission.html" class="text-dim">
                        <i data-lucide="plus-circle"></i> Add Resource
                    </a>
                    <a href="dashboard.html" class="text-dim">
                        <i data-lucide="layout-grid"></i> Directory
                    </a>
                    <a href="references.html" class="text-dim">
                        <i data-lucide="file-text"></i> References
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- ========== OPPORTUNITY DETAIL MODAL ========== -->
    <div class="modal" id="detailModal">
        <div class="modal-content">
            <!-- Content will be populated by viewOpportunityDetails -->
        </div>
    </div>

    <!-- ========== EDIT PROFILE MODAL ========== -->
    <div class="modal" id="editProfileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i data-lucide="edit"></i> Edit Profile</h3>
                <button class="btn btn-secondary" onclick="closeEditModal()">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- Edit form will be loaded here -->
            </div>
        </div>
    </div>

    <!-- ========== READER OVERLAY ========== -->
    <div id="readerOverlay" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(10,10,10,0.98); color:#fff; z-index:20000; overflow:auto; padding:2rem;">
        <button onclick="closeReaderOverlay()" style="position:absolute; top:1rem; right:2rem; font-size:2rem; background:none; color:#fff; border:none; cursor:pointer;">&times;</button>
        <h2 style="font-size:2.5rem; margin-bottom:1.5rem;">Reader Mode</h2>
        <div id="readerContent" style="font-size:1.5rem; line-height:2; max-width:900px; margin:auto;"></div>
        <button onclick="readAloud()" style="margin-top:2rem; font-size:1.2rem; padding:0.75rem 2rem; background:#10b981; color:#000; border:none; border-radius:8px; cursor:pointer;">Read Aloud</button>
    </div>

    <!-- ========== JAVASCRIPT ========== -->
    <script src="js/data.js"></script>
    <script src="js/main.js"></script>
    
    <script>
        // Profile page functionality
        let currentTab = 'profile';
        
        // Listen for bookmark changes from other tabs
        window.addEventListener('storage', function(e) {
            if (e.key === 'studentAtlasBookmarks') {
                // Reload bookmarks if on bookmarks tab
                if (currentTab === 'bookmarks') {
                    loadBookmarks();
                }
            }
        });
        let passwordVisible = false;
        
        // Initialize profile page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            
            // Load profile data
            loadProfileData();
            
            // Load bookmarks
            loadBookmarks();
            
            // Check URL hash for tab
            checkUrlHash();
            
            // Set up event listeners
            setupProfileListeners();
            
            // Update last login time
            updateLastLogin();
        });
        
        // ============================================
        // TAB NAVIGATION
        // ============================================
        
        function showTab(tabId, button) {
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            button.classList.add('active');
            
            // Show tab content
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(`${tabId}-tab`).classList.add('active');
            
            currentTab = tabId;
            
            // Update URL hash
            window.location.hash = tabId;
            
            // Close profile dropdown if open
            const profileMenu = document.getElementById('profileMenu');
            if (profileMenu) {
                profileMenu.classList.add('hidden');
            }
            
            // Load tab-specific data
            if (tabId === 'bookmarks') {
                loadBookmarks();
            }
        }
        
        function checkUrlHash() {
            const hash = window.location.hash.substring(1); // Remove the '#'
            if (hash) {
                const tabButton = document.getElementById(`${hash}TabBtn`);
                if (tabButton) {
                    showTab(hash, tabButton);
                }
            }
        }
        
        // Close profile dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('profileMenu');
            const button = document.querySelector('.profile-dropdown > .btn');
            if (menu && button && !menu.classList.contains('hidden')) {
                if (!button.contains(event.target) && !menu.contains(event.target)) {
                    menu.classList.add('hidden');
                }
            }
        });
        
        // ============================================
        // PROFILE DATA LOADING
        // ============================================
        
        function loadProfileData() {
            const profile = StudentAtlas.getStudentProfile();
            
            if (profile) {
                // Update profile information
                document.getElementById('profileName').textContent = profile.username || 'TSA Student 2026';
                document.getElementById('profileGrade').textContent = profile.grade || '11th Grade';
                document.getElementById('profileGPA').textContent = profile.gpa || '3.8';
                document.getElementById('profileHours').textContent = (profile.serviceHours || '120') + ' hours';
                document.getElementById('profileCluster').textContent = profile.clusterMatch || 'STEM';
                document.getElementById('profileCareer').textContent = profile.careerGoals?.join(', ') || 'Engineering, Medicine';
                document.getElementById('profileSkills').textContent = profile.skills?.join(', ') || 'Programming, Research, Leadership';
                document.getElementById('profileLeadership').textContent = profile.leadershipRoles?.join(', ') || 'Club President, Team Captain';
                document.getElementById('profileFinancial').textContent = profile.financialNeed ? 'Yes' : 'No';
                
                // Update credentials
                document.getElementById('credUsername').textContent = profile.username || 'tsa_student_2026';
                document.getElementById('credEmail').textContent = profile.email || 'student@tsaatlas.org';
                
                // Update username in header
                
                // Calculate and update statistics
                updateProfileStatistics();
            }
        }
        
        function updateProfileStatistics() {
            if (!window.opportunitiesData) return;
            
            const profile = StudentAtlas.getStudentProfile();
            if (!profile) return;
            
            // Calculate match statistics
            let eligibleCount = 0;
            let strongMatches = 0;
            let goodMatches = 0;
            let totalScore = 0;
            
            window.opportunitiesData.forEach(opp => {
                const score = StudentAtlas.getOpportunityMatchScore(opp.id);
                totalScore += score;
                
                if (score >= 70) eligibleCount++;
                if (score >= 90) strongMatches++;
                else if (score >= 70) goodMatches++;
            });
            
            const avgMatchScore = Math.round(totalScore / window.opportunitiesData.length);
            
            // Update DOM
            document.getElementById('eligibleCount').textContent = eligibleCount;
            document.getElementById('strongMatches').textContent = strongMatches;
            document.getElementById('goodMatches').textContent = goodMatches;
            document.getElementById('avgMatchScore').textContent = avgMatchScore + '%';
        }
        
        // ============================================
        // BOOKMARKS MANAGEMENT
        // ============================================
        
        function loadBookmarks() {
            // Ensure bookmarks are loaded from storage
            StudentAtlas.loadBookmarks();
            
            const bookmarks = StudentAtlas.getBookmarkedOpportunities();
            const container = document.getElementById('bookmarksList');
            const emptyState = document.getElementById('emptyBookmarks');
            
            // Update count badges
            const count = bookmarks.length;
            document.getElementById('bookmarkCountBadge').textContent = count;
            document.getElementById('bookmarkTotal').textContent = `${count} bookmark${count !== 1 ? 's' : ''}`;
            
            if (count === 0) {
                if (emptyState) emptyState.classList.remove('hidden');
                container.innerHTML = '';
                return;
            }
            
            if (emptyState) emptyState.classList.add('hidden');
            
            // Display bookmarks
            container.innerHTML = bookmarks.map(opp => {
                const matchScore = StudentAtlas.getOpportunityMatchScore(opp.id);
                const matchColor = matchScore >= 90 ? 'var(--success)' : matchScore >= 70 ? 'var(--warning)' : 'var(--error)';
                return `
                <div class="opportunity-card" data-id="${opp.id}">
                    <div class="card-header">
                        <div>
                            <span class="match-badge" style="background: ${matchColor}">
                                ${matchScore}% Match
                            </span>
                            <h4 class="card-title">${opp.title}</h4>
                            <p class="card-org">${opp.organization}</p>
                        </div>
                        <button class="save-btn saved" 
                                onclick="StudentAtlas.toggleBookmark(${opp.id}); loadBookmarks();"
                                aria-label="Remove bookmark">
                            <i data-lucide="bookmark"></i>
                        </button>
                    </div>
                    
                    <div class="card-details">
                        <div class="detail-row">
                            <i data-lucide="map-pin"></i>
                            <span>${opp.location}</span>
                        </div>
                        <div class="detail-row">
                            <i data-lucide="dollar-sign"></i>
                            <span>${opp.cost}</span>
                        </div>
                        <div class="detail-row">
                            <i data-lucide="calendar"></i>
                            <span>${opp.duration}</span>
                        </div>
                        <div class="detail-row">
                            <i data-lucide="tag"></i>
                            <span style="color: ${StudentAtlas.getClusterColor(opp.cluster)}">
                                ${opp.cluster}
                            </span>
                        </div>
                    </div>
                    
                    <p class="text-dim">${opp.description.substring(0, 120)}...</p>
                    
                    <div class="flex gap-2 mt-3">
                        <button class="btn btn-primary" style="flex: 2;" 
                                onclick="viewOpportunityDetails(${opp.id})">
                            View Details
                        </button>
                        <button class="btn btn-secondary" style="flex: 1;" 
                                onclick="window.open('${opp.link}', '_blank')"
                                aria-label="Apply now">
                            Apply
                        </button>
                    </div>
                </div>
            `;
            }).join('');
            
            // Re-initialize icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }
        
        function viewBookmark(opportunityId) {
            // Could open in a modal or redirect to dashboard with focus
            window.location.href = `dashboard.html#opportunity-${opportunityId}`;
        }
        
        function removeBookmark(opportunityId) {
            StudentAtlas.toggleBookmark(opportunityId);
            loadBookmarks();
            StudentAtlas.showNotification('Bookmark removed', 'info');
        }
        
        function clearBookmarks() {
            if (confirm('Are you sure you want to clear all bookmarks? This cannot be undone.')) {
                StudentAtlas.state.bookmarks = [];
                StudentAtlas.saveBookmarks();
                loadBookmarks();
                StudentAtlas.showNotification('All bookmarks cleared', 'info');
            }
        }
        
        function viewOpportunityDetails(opportunityId) {
            const opportunity = window.opportunitiesData?.find(opp => opp.id === opportunityId);
            if (!opportunity) return;
            
            const modal = document.getElementById('detailModal');
            const content = modal.querySelector('.modal-content');
            const matchScore = StudentAtlas.getOpportunityMatchScore(opportunityId);
            const isBookmarked = StudentAtlas.isBookmarked(opportunityId);
            const matchColor = StudentAtlas.getClusterColor(opportunity.cluster);
            
            content.innerHTML = `
                <button class="modal-close-btn" onclick="closeDetailModal()">×</button>
                
                <div class="flex items-start gap-4 mb-4">
                    <div style="width: 4rem; height: 4rem; background: ${matchColor}20; 
                             border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center;">
                        <i data-lucide="briefcase" style="width: 2rem; height: 2rem; color: ${matchColor};"></i>
                    </div>
                    <div>
                        <h2>${opportunity.title}</h2>
                        <p class="text-dim">${opportunity.organization}</p>
                        <span class="match-badge" style="background: ${matchColor}">
                            ${matchScore}% Match
                        </span>
                        <span class="match-badge" style="background: ${StudentAtlas.getClusterColor(opportunity.cluster)}; margin-left: 0.5rem;">
                            ${opportunity.cluster}
                        </span>
                    </div>
                </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-4" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                        <div class="spotlight-card">
                            <h4><i data-lucide="map-pin"></i> Location</h4>
                            <p>${opportunity.location}</p>
                        </div>
                        <div class="spotlight-card">
                            <h4><i data-lucide="dollar-sign"></i> Cost</h4>
                            <p>${opportunity.cost}</p>
                        </div>
                        <div class="spotlight-card">
                            <h4><i data-lucide="calendar"></i> Duration</h4>
                            <p>${opportunity.duration}</p>
                        </div>
                        <div class="spotlight-card">
                            <h4><i data-lucide="users"></i> Eligible Grades</h4>
                            <p>${opportunity.eligibility.grades.map(g => g + (g === 1 ? 'st' : g === 2 ? 'nd' : g === 3 ? 'rd' : 'th')).join(', ')}</p>
                        </div>
                    </div>
                    
                    <div class="spotlight-card mb-4">
                        <h4><i data-lucide="file-text"></i> Description</h4>
                        <p>${opportunity.description}</p>
                    </div>
                    
                    <div class="spotlight-card mb-4">
                        <h4><i data-lucide="check-circle"></i> Eligibility Requirements</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li class="detail-row"><i data-lucide="star"></i> Minimum GPA: ${opportunity.eligibility.minGPA}</li>
                            <li class="detail-row"><i data-lucide="graduation-cap"></i> Grades: ${opportunity.eligibility.grades.map(g => g + 'th').join(', ')}</li>
                            <li class="detail-row"><i data-lucide="target"></i> Skills: ${opportunity.eligibility.skills.join(', ')}</li>
                            ${opportunity.eligibility.hoursRequired > 0 ? 
                                `<li class="detail-row"><i data-lucide="clock"></i> Service Hours: ${opportunity.eligibility.hoursRequired}+ required</li>` : ''}
                        </ul>
                    </div>
                    
                    <div class="flex gap-2">
                        <button class="btn btn-primary" style="flex: 2;" 
                                onclick="window.open('${opportunity.link}', '_blank')"
                                ${matchScore < 70 ? 'disabled style="opacity: 0.5;"' : ''}>
                            <i data-lucide="external-link"></i> 
                            ${matchScore < 70 ? 'Review Eligibility First' : 'Apply Now'}
                        </button>
                        <button class="btn btn-secondary" style="flex: 1;" 
                                onclick="toggleBookmarkDetail(${opportunity.id})">
                            <i data-lucide="${isBookmarked ? 'bookmark-minus' : 'bookmark-plus'}"></i>
                            ${isBookmarked ? 'Remove Bookmark' : 'Bookmark'}
                        </button>
                    </div>
                </div>
            `;
            
            modal.classList.add('show');
            
            // Re-initialize icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        function closeDetailModal() {
            document.getElementById('detailModal').classList.remove('show');
        }

        function toggleBookmarkDetail(opportunityId) {
            StudentAtlas.toggleBookmark(opportunityId);
            // Refresh the modal content
            viewOpportunityDetails(opportunityId);
            loadBookmarks();
        }
        
        // ============================================
        // CREDENTIALS MANAGEMENT
        // ============================================
        
        function togglePassword() {
            const passwordElement = document.getElementById('credPassword');
            const toggleButton = document.getElementById('togglePasswordBtn');
            
            if (passwordVisible) {
                passwordElement.textContent = '••••••••••';
                toggleButton.textContent = 'Show';
                toggleButton.setAttribute('data-lucide', 'eye');
            } else {
                const profile = StudentAtlas.getStudentProfile();
                passwordElement.textContent = profile.password || 'StudentAtlas2026!';
                toggleButton.textContent = 'Hide';
                toggleButton.setAttribute('data-lucide', 'eye-off');
            }
            
            passwordVisible = !passwordVisible;
            
            // Re-initialize icon
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }
        
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                StudentAtlas.showNotification('Copied to clipboard!', 'success');
            }).catch(err => {
                console.error('Failed to copy: ', err);
                StudentAtlas.showNotification('Failed to copy', 'error');
            });
        }
        
        function updateLastLogin() {
            const now = new Date();
            const options = { 
                hour: 'numeric', 
                minute: 'numeric',
                hour12: true,
                month: 'short',
                day: 'numeric',
                year: 'numeric'
            };
            document.getElementById('lastLogin').textContent = now.toLocaleDateString('en-US', options);
        }
        
        // ============================================
        // PROFILE ACTIONS
        // ============================================
        
        function exportBlueprint() {
            // Simulate PDF export
            StudentAtlas.showNotification('Generating your National Blueprint PDF...', 'info');
            
            setTimeout(() => {
                StudentAtlas.showNotification('Blueprint exported successfully!', 'success');
                
                // In a real implementation, this would generate and download a PDF
                // For demo purposes, we'll create a simple download
                const profile = StudentAtlas.getStudentProfile();
                const content = `
                    STUDENT ATLAS - NATIONAL BLUEPRINT
                    ===================================
                    
                    Student: ${profile.username}
                    Grade: ${profile.grade}
                    GPA: ${profile.gpa}
                    Service Hours: ${profile.serviceHours}
                    Primary Cluster: ${profile.clusterMatch}
                    
                    Career Interests: ${profile.careerGoals?.join(', ')}
                    Skills: ${profile.skills?.join(', ')}
                    Leadership Roles: ${profile.leadershipRoles?.join(', ')}
                    
                    Generated on: ${new Date().toLocaleDateString()}
                    
                    This blueprint was generated by Student Atlas AI Counselor.
                    Visit https://student-atlas.org for more opportunities.
                `;
                
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'Student-Atlas-Blueprint.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 1500);
        }
        
        function editProfile() {
            const modal = document.getElementById('editProfileModal');
            const body = modal.querySelector('.modal-body');
            
            const profile = StudentAtlas.getStudentProfile();
            
            body.innerHTML = `
                <form id="editProfileForm">
                    <div class="form-group">
                        <label class="form-label">Grade Level</label>
                        <select class="form-input" id="editGrade">
                            <option value="9th" ${profile.grade === '9th' ? 'selected' : ''}>9th Grade</option>
                            <option value="10th" ${profile.grade === '10th' ? 'selected' : ''}>10th Grade</option>
                            <option value="11th" ${profile.grade === '11th' || !profile.grade ? 'selected' : ''}>11th Grade</option>
                            <option value="12th" ${profile.grade === '12th' ? 'selected' : ''}>12th Grade</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">GPA</label>
                        <input type="range" class="form-input" id="editGPA" min="2.0" max="4.0" step="0.1" value="${profile.gpa || 3.8}">
                        <div class="flex justify-between mt-1">
                            <span class="text-dim">2.0</span>
                            <span id="gpaValueDisplay" class="font-bold">${profile.gpa || 3.8}</span>
                            <span class="text-dim">4.0</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Service Hours</label>
                        <input type="number" class="form-input" id="editHours" value="${profile.serviceHours || 120}" min="0" max="1000">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Primary Career Interests</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="career" value="Engineering" ${profile.careerGoals?.includes('Engineering') ? 'checked' : ''}>
                                <span>Engineering</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="career" value="Medicine" ${profile.careerGoals?.includes('Medicine') ? 'checked' : ''}>
                                <span>Medicine</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="career" value="Arts" ${profile.careerGoals?.includes('Arts') ? 'checked' : ''}>
                                <span>Arts</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="career" value="Government" ${profile.careerGoals?.includes('Government') ? 'checked' : ''}>
                                <span>Government</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="career" value="Business" ${profile.careerGoals?.includes('Business') ? 'checked' : ''}>
                                <span>Business</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Financial Need</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="radio" name="financial" value="yes" ${profile.financialNeed ? 'checked' : ''}>
                                <span>Yes</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" name="financial" value="no" ${!profile.financialNeed ? 'checked' : ''}>
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="flex gap-2 mt-6">
                        <button type="button" class="btn btn-secondary" onclick="closeEditModal()" style="flex: 1;">
                            Cancel
                        </button>
                        <button type="button" class="btn btn-primary" onclick="saveProfileChanges()" style="flex: 2;">
                            Save Changes
                        </button>
                    </div>
                </form>
            `;
            
            // Set up GPA slider
            const gpaSlider = document.getElementById('editGPA');
            const gpaDisplay = document.getElementById('gpaValueDisplay');
            
            gpaSlider.addEventListener('input', function() {
                gpaDisplay.textContent = this.value;
            });
            
            modal.classList.add('show');
        }
        
        function closeEditModal() {
            document.getElementById('editProfileModal').classList.remove('show');
        }
        
        function saveProfileChanges() {
            const grade = document.getElementById('editGrade').value;
            const gpa = parseFloat(document.getElementById('editGPA').value);
            const hours = parseInt(document.getElementById('editHours').value);
            
            const careerGoals = Array.from(document.querySelectorAll('input[name="career"]:checked'))
                                    .map(cb => cb.value);
            
            const financialNeed = document.querySelector('input[name="financial"]:checked')?.value === 'yes';
            
            // Determine cluster based on selections
            let clusterMatch = 'STEM';
            if (careerGoals.includes('Arts')) clusterMatch = 'Arts';
            if (careerGoals.includes('Government')) clusterMatch = 'Civics';
            if (financialNeed) clusterMatch = 'Scholarships';
            
            StudentAtlas.updateStudentProfile({
                grade: grade + ' Grade',
                gpa: gpa,
                serviceHours: hours,
                careerGoals: careerGoals,
                financialNeed: financialNeed,
                clusterMatch: clusterMatch
            });
            
            closeEditModal();
            loadProfileData();
            StudentAtlas.showNotification('Profile updated successfully!', 'success');
        }
        
        function changePassword() {
            StudentAtlas.showNotification('Password change feature would be enabled in production.', 'info');
        }
        
        function updateEmail() {
            StudentAtlas.showNotification('Email update feature would be enabled in production.', 'info');
        }
        
        function downloadData() {
            const profile = StudentAtlas.getStudentProfile();
            const bookmarks = StudentAtlas.getBookmarkedOpportunities();
            
            const data = {
                profile: profile,
                bookmarks: bookmarks.map(opp => ({
                    id: opp.id,
                    title: opp.title,
                    organization: opp.organization,
                    matchScore: StudentAtlas.getOpportunityMatchScore(opp.id)
                })),
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'student-atlas-data.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            StudentAtlas.showNotification('Data downloaded successfully!', 'success');
        }
        
        function deleteAccount() {
            if (confirm('Are you sure you want to delete your account? This will permanently remove all your data and cannot be undone.')) {
                StudentAtlas.clearAllData();
                StudentAtlas.showNotification('Account deleted. Redirecting to homepage...', 'info');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 2000);
            }
        }
        
        // ============================================
        // AI CHAT FUNCTIONS
        // ============================================
        
        function toggleAIChat() {
            const panel = document.getElementById('aiPanel');
            panel.classList.toggle('open');
            
            if (panel.classList.contains('open')) {
                document.getElementById('aiInput').focus();
            }
        }
        
        function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            const messagesDiv = document.getElementById('aiMessages');
            const userMsg = document.createElement('div');
            userMsg.className = 'message user';
            userMsg.innerHTML = `<strong>You:</strong> ${message}`;
            messagesDiv.appendChild(userMsg);
            
            // Clear input
            input.value = '';
            
            // Get AI response
            setTimeout(() => {
                const aiMsg = document.createElement('div');
                aiMsg.className = 'message ai';
                
                // Profile-specific responses
                let response = StudentAtlas.getZeusResponse(message);
                
                // Enhanced responses for profile context
                if (message.toLowerCase().includes('match') || message.toLowerCase().includes('score')) {
                    const profile = StudentAtlas.getStudentProfile();
                    response = `Your average match score is ${document.getElementById('avgMatchScore').textContent}. You're most compatible with ${profile.clusterMatch} opportunities. Check the "Match Statistics" section for details.`;
                } else if (message.toLowerCase().includes('bookmark')) {
                    const count = StudentAtlas.state.bookmarks.length;
                    response = `You have ${count} bookmarked opportunities. You can view them in the "Bookmarks" tab.`;
                } else if (message.toLowerCase().includes('blueprint') || message.toLowerCase().includes('export')) {
                    response = 'You can export your National Blueprint as a PDF using the "Export Blueprint" button. This creates a shareable document with your profile and match information.';
                } else if (message.toLowerCase().includes('profile') || message.toLowerCase().includes('edit')) {
                    response = 'Click the "Edit Profile" button to update your information. Changes will automatically update your match scores with opportunities.';
                }
                
                aiMsg.innerHTML = `<strong>Zeus:</strong> ${response}`;
                messagesDiv.appendChild(aiMsg);
                
                // Scroll to bottom
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
            }, 500);
        }
        
        // ============================================
        // EVENT LISTENERS
        // ============================================
        
        function setupProfileListeners() {
            // AI chat input
            const aiInput = document.getElementById('aiInput');
            if (aiInput) {
                aiInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') sendAIMessage();
                });
            }
            
            // Security toggles
            const toggles = ['twoFactorToggle', 'loginNotifications', 'sessionTimeout'];
            toggles.forEach(id => {
                const toggle = document.getElementById(id);
                if (toggle) {
                    toggle.addEventListener('change', function() {
                        const state = this.checked ? 'enabled' : 'disabled';
                        const feature = this.id.replace('Toggle', '').replace(/([A-Z])/g, ' $1').trim();
                        StudentAtlas.showNotification(`${feature} ${state}`, 'info');
                    });
                }
            });
            
            // Profile menu
            const profileBtn = document.querySelector('.profile-btn');
            if (profileBtn) {
                profileBtn.addEventListener('click', toggleProfileMenu);
            }
        }
        
        function toggleProfileMenu() {
            const menu = document.getElementById('profileMenu');
            menu.classList.toggle('hidden');
        }
        
        function logout() {
            StudentAtlas.clearAllData();
            window.location.href = 'index.html';
        }
        
        // ============================================
        // GLOBAL FUNCTION EXPORTS
        // ============================================
        
        window.showTab = showTab;
        window.viewBookmark = viewBookmark;
        window.removeBookmark = removeBookmark;
        window.clearBookmarks = clearBookmarks;
        window.togglePassword = togglePassword;
        window.copyToClipboard = copyToClipboard;
        window.exportBlueprint = exportBlueprint;
        window.editProfile = editProfile;
        window.closeEditModal = closeEditModal;
        window.saveProfileChanges = saveProfileChanges;
        window.changePassword = changePassword;
        window.updateEmail = updateEmail;
        window.downloadData = downloadData;
        window.deleteAccount = deleteAccount;
        window.toggleAIChat = toggleAIChat;
        window.sendAIMessage = sendAIMessage;
        window.toggleProfileMenu = toggleProfileMenu;
        window.logout = logout;
    </script>
    
    <style>
        /* Profile-specific styles */
        .avatar-placeholder {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .cluster-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 4px;
        }
        
        .cluster-tag.stem { background: #3b82f6; color: white; }
        .cluster-tag.arts { background: #8b5cf6; color: white; }
        .cluster-tag.humanitarian { background: #10b981; color: white; }
        .cluster-tag.civics { background: #ef4444; color: white; }
        .cluster-tag.scholarships { background: #f59e0b; color: white; }
        
        .cluster-bars {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .cluster-bar {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .cluster-label {
            display: flex;
            align-items: center;
            gap: 6px;
            min-width: 120px;
        }
        
        .cluster-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .cluster-dot.stem { background: #3b82f6; }
        .cluster-dot.arts { background: #8b5cf6; }
        .cluster-dot.humanitarian { background: #10b981; }
        .cluster-dot.civics { background: #ef4444; }
        .cluster-dot.scholarships { background: #f59e0b; }
        
        .bar-container {
            flex: 1;
            height: 20px;
            background: var(--border-color);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .bar-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .bar-fill.stem { background: #3b82f6; }
        .bar-fill.arts { background: #8b5cf6; }
        .bar-fill.humanitarian { background: #10b981; }
        .bar-fill.civics { background: #ef4444; }
        .bar-fill.scholarships { background: #f59e0b; }
        
        .bar-percentage {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        .bookmark-count {
            background: var(--primary);
            color: white;
            font-size: 0.7rem;
            padding: 1px 6px;
            border-radius: 10px;
            margin-left: 4px;
        }
        
        .bookmark-item {
            background: var(--bg-card);
            border-radius: var(--radius-md);
            padding: 1rem;
            border-left: 4px solid var(--primary);
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s;
        }
        
        .bookmark-item:hover {
            transform: translateX(5px);
        }
        
        .bookmark-content {
            flex: 1;
        }
        
        .bookmark-actions {
            display: flex;
            gap: 8px;
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-dim);
        }
        
        .tip-list {
            list-style: none;
            padding: 0;
        }
        
        .tip-list li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }
        
        .tip-list li:before {
            content: "•";
            position: absolute;
            left: 0;
            color: var(--primary);
        }
        
        .credentials-section {
            margin-bottom: 2rem;
        }
        
        .security-settings {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .security-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--border-color);
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary);
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }
        
        .btn-text {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 0.9rem;
            padding: 0.25rem 0.5rem;
        }
        
        .btn-text:hover {
            text-decoration: underline;
        }
        
        .btn-error {
            background: var(--error);
            color: white;
        }
        
        .btn-error:hover {
            background: #dc2626;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
    </style>
</body>
</html>